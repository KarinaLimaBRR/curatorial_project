@startuml Diagrama de Atividades - Fluxo Principal do Sistema

start

:Usuário acessa o sistema;
:Tela de Login é exibida;

repeat
    :Usuário insere login e senha;
    :Sistema valida credenciais;
    
    if (Credenciais válidas?) then (não)
        :Exibir mensagem de erro;
        :Limpar campos;
    else (sim)
        :Buscar dados do usuário no banco;
        if (Usuário está ativo?) then (não)
            :Exibir mensagem: conta inativa;
        else (sim)
            if (Tipo = Administrador?) then (sim)
                :Redirecionar para TelaAdmin;
                fork
                    :Visualizar lista de usuários;
                fork
                    :Cadastrar novo usuário;
                    :Preencher formulário;
                    :Validar dados;
                    if (Dados válidos?) then (sim)
                        :Salvar no banco;
                        :Atualizar lista;
                    else (não)
                        :Exibir erros de validação;
                    endif
                fork
                    :Editar usuário existente;
                    :Carregar dados;
                    :Modificar informações;
                    :Salvar alterações;
                fork
                    :Inativar usuário;
                    :Confirmar ação;
                    :Atualizar status no banco;
                end fork
            else (não - Usuário Comum)
                :Redirecionar para TelaComum;
                fork
                    :Cadastrar recurso;
                    :Preencher título, autor e categoria;
                    :Validar campos obrigatórios;
                    if (Campos válidos?) then (sim)
                        :Salvar recurso no banco;
                        :Limpar formulário;
                        :Atualizar lista;
                    else (não)
                        :Exibir mensagem de erro;
                    endif
                fork
                    :Visualizar recursos;
                    :Buscar todos os recursos;
                    :Ordenar alfabeticamente por título;
                    :Exibir em tabela;
                end fork
            endif
        endif
    endif
repeat while (Usuário não fez login?) is (sim)

stop

@enduml

